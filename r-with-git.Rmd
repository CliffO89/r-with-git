---
title: "R With Git and Github"
author: "Aris Paschalidis"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output: 
  beamer_presentation:
    theme: "CambridgeUS"
    colortheme: "beaver"
    slide_level: 2
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  ollapse = TRUE,
  comment = "#>")
```

# Setup

## Install Git

Git allows us to track changes to our documents (i.e. Git is version control).

-  Check if git is already installed: `which git`
```{bash, echo = F}
which git 
```

- Install git for Windows: <https://gitforwindows.org/>
- Install git for Mac: `brew install git`
- Install git for Linux:
  + Ubuntu or Debian: `sudo apt-get install git`
  + Fedora or RedHat: `sudo yum install git`
  
## Configure Git

- Introduce yourself to git
```{r, eval = F}
usethis::use_git_config(user.name = "first last",
                        user.email = "github email")
```

- Ensure setup was successful
```{bash}
git config --global --list 
```

## Managing Git(Hub) Credentials[^ref]

- Adopt HTTPS
- [Secure your account with 2FA](https://docs.github.com/en/github/authenticating-to-github/securing-your-account-with-two-factor-authentication-2fa)
- Create a PAT: `usethis::create_github_token()`
- Store PAT into the Git credential store: `gitcreds::gitcreds_set()`

[^ref]: Following the [usethis guide](https://usethis.r-lib.org/articles/articles/git-credentials.html)

# Git Basics

## Stage & Commit

```{r, echo = F, out.width='75%', fig.align='center', fig.cap='Git Workflow'}
knitr::include_graphics('images/git-workflow.png')
```

- We can create and edit files within our project
- We can then **stage** and **commit** these changes

## Diff

- We can look at the set of *differences* between files to see what has changed

```{r, echo = F, out.width='60%', fig.align='center', fig.cap='Example Diff'}
knitr::include_graphics('images/example-diff.png')
```

## Commit Best Practices

Each commit should be:

- *Minimal:* A commit should only contain changes related to a single problem 
    or feature
- *Complete:* A commit should add the functionality it claims to add
- *Concise, yet evocative:* At a glance, you should be able to understand what 
    a commit does, but you should include enough detail so you can remember 
    what was done

## Time Travel

- Can look at old commits and access old code
- Can use your git client or Github
- Can revert back to a previous commit

## Pull & Push Changes

```{r, echo = F, out.width='60%', fig.align='center', fig.cap='Accessing the Cloud'}
knitr::include_graphics('images/push-pull.png')
```

- **Pulling** changes from Github allows us to access stored changes
- **Pushing** changes stores changes on Github

# Try It Out

## Make a RStudio Project and Connect to Github

- Create a project: `usethis::create_project(path)`
- Use git: `usethis::use_git()`
- Connect a Github repo: `usethis::use_github()`

## Commit & Push

- Make a .Rmd file and edit it
- Commit your change
- Make another change and commit it
- Push your changes
